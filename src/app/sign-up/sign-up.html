<div class="auth-container">
  <div class="auth-form">
    <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
      <h2>Créer un compte</h2>
      
      <div class="form-group">
        <label>Prénom *</label>
        <input 
          type="text" 
          formControlName="firstName"
          [class.invalid]="signUpForm.get('firstName')?.invalid && signUpForm.get('firstName')?.touched"
        >
        @if (signUpForm.get('firstName')?.errors?.['required'] && signUpForm.get('firstName')?.touched) {
          <small class="error-message">Ce champ est obligatoire</small>
        }
      </div>

      <div class="form-group">
        <label>Nom *</label>
        <input 
          type="text" 
          formControlName="lastName"
          [class.invalid]="signUpForm.get('lastName')?.invalid && signUpForm.get('lastName')?.touched"
        >
        @if (signUpForm.get('lastName')?.errors?.['required'] && signUpForm.get('lastName')?.touched) {
          <small class="error-message">Ce champ est obligatoire</small>
        }
      </div>

      <div class="form-group">
        <label>Email *</label>
        <input 
          type="email" 
          formControlName="email"
          [class.invalid]="signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched"
        >
        @if (signUpForm.get('email')?.errors?.['required'] && signUpForm.get('email')?.touched) {
          <small class="error-message">Email requis</small>
        }
        @if (signUpForm.get('email')?.errors?.['email'] && signUpForm.get('email')?.touched) {
          <small class="error-message">Email invalide</small>
        }
      </div>

      <div class="form-group">
        <label>Téléphone</label>
        <input type="tel" formControlName="phone">
      </div>

      <div class="form-group">
        <label>Mot de passe *</label>
        <input 
          type="password" 
          formControlName="password"
          [class.invalid]="signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched"
        >
        @if (signUpForm.get('password')?.errors?.['required'] && signUpForm.get('password')?.touched) {
          <small class="error-message">Mot de passe requis</small>
        }
        @if (signUpForm.get('password')?.errors?.['minlength'] && signUpForm.get('password')?.touched) {
          <small class="error-message">8 caractères minimum</small>
        }
      </div>

      <div class="form-group">
        <label>Confirmer le mot de passe *</label>
        <input 
          type="password" 
          formControlName="confirmPassword"
          [class.invalid]="signUpForm.errors?.['mismatch'] && signUpForm.get('confirmPassword')?.touched"
        >
        @if (signUpForm.errors?.['mismatch'] && signUpForm.get('confirmPassword')?.touched) {
          <small class="error-message">Les mots de passe ne correspondent pas</small>
        }
      </div>

      <button 
        type="submit" 
        [disabled]="signUpForm.invalid || isLoading"
        [class.loading]="isLoading"
      >
        @if (isLoading) {
          <span class="spinner"></span>
        } @else {
          S'inscrire
        }
      </button>

      <p class="signin-link">
        Déjà un compte? <a routerLink="/signin">Se connecter</a>
      </p>
    </form>

    @if (showSuccess) {
      <div class="success-message">
        Enregistré avec succès! ✅
      </div>
    }
  </div>
</div>